# Nuxt.js Webç«¯é¡¹ç›® - æ­å»ºå®Œæˆè¯´æ˜

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. é¡¹ç›®åŸºç¡€æ¶æ„
- âœ… Nuxt.js 3 é¡¹ç›®åˆå§‹åŒ–
- âœ… TypeScript é…ç½®
- âœ… é¡¹ç›®ç›®å½•ç»“æ„åˆ›å»º

### 2. æ•°æ®åº“é…ç½®
- âœ… Prisma ORM é…ç½®å®Œæˆ
- âœ… æ•°æ®åº“è¿æ¥é…ç½®ï¼ˆMySQLï¼‰
- âœ… Prisma Client å·²ç”Ÿæˆ
- âœ… æ•°æ®åº“ schema å·²åŒæ­¥ï¼ˆé€šè¿‡ `prisma db pull`ï¼‰

### 3. ä¾èµ–å®‰è£…
- âœ… Element Plus UIç»„ä»¶åº“
- âœ… Pinia çŠ¶æ€ç®¡ç†
- âœ… Prisma ORM
- âœ… JWT è®¤è¯ç›¸å…³åº“
- âœ… bcryptjs å¯†ç åŠ å¯†
- âœ… é˜¿é‡Œäº‘ OSS SDK
- âœ… Sharp å›¾ç‰‡å¤„ç†

### 4. åç«¯APIï¼ˆNuxt Server APIï¼‰
- âœ… ç”¨æˆ·æ³¨å†Œæ¥å£ `POST /api/auth/register`
- âœ… ç”¨æˆ·ç™»å½•æ¥å£ `POST /api/auth/login`
- âœ… è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ `GET /api/auth/me`
- âœ… é¡µé¢è®¿é—®ç»Ÿè®¡ `POST /api/statistics/pageview`
- âœ… ç‚¹å‡»äº‹ä»¶ç»Ÿè®¡ `POST /api/statistics/click`

### 5. å‰ç«¯åŠŸèƒ½
- âœ… ç™»å½•é¡µé¢ (`/pages/login.vue`)
- âœ… æ³¨å†Œé¡µé¢ (`/pages/register.vue`)
- âœ… é¦–é¡µ (`/pages/index.vue`)
- âœ… Pinia è®¤è¯çŠ¶æ€ç®¡ç†
- âœ… JWT Token æŒä¹…åŒ–ï¼ˆlocalStorageï¼‰
- âœ… é¡µé¢è®¿é—®ç»Ÿè®¡é›†æˆ
- âœ… ç‚¹å‡»äº‹ä»¶ç»Ÿè®¡é›†æˆ

### 6. å·¥å…·å‡½æ•°
- âœ… Prisma Client å•ä¾‹æ¨¡å¼
- âœ… JWT Token ç”Ÿæˆå’ŒéªŒè¯
- âœ… å¯†ç åŠ å¯†å’ŒéªŒè¯ï¼ˆbcryptï¼‰
- âœ… é˜¿é‡Œäº‘ OSS ä¸Šä¼ å·¥å…·

## ğŸ“ ç¯å¢ƒå˜é‡é…ç½®

`.env` æ–‡ä»¶å·²åˆ›å»ºï¼ŒåŒ…å«ä»¥ä¸‹é…ç½®ï¼š

```env
# æ•°æ®åº“é…ç½®
DB_HOST=0.tcp.jp.ngrok.io
DB_PORT=17304
DB_USER=root
DB_PASSWORD=123456
DATABASE_URL=mysql://root:123456@0.tcp.jp.ngrok.io:17304/island_social?connection_limit=1

# JWTé…ç½®
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=7d

# é˜¿é‡Œäº‘OSSé…ç½®
OSS_BUCKET=qqqsss
OSS_ENDPOINT=oss-cn-hongkong.aliyuncs.com
OSS_REGION=oss-cn-hongkong
OSS_ACCESS_KEY=LTAI5tJYwz zXEQ6PZMhkgnbn
OSS_ACCESS_SECRET=eLYJH9im K8yUjg7DW9pMOZ3rZSmMge
```

## ğŸš€ è¿è¡Œé¡¹ç›®

### å¼€å‘æ¨¡å¼
```bash
cd nuxtjs
npm run dev
```

è®¿é—® http://localhost:3000

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
npm run preview
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
nuxtjs/
â”œâ”€â”€ server/                    # æœåŠ¡ç«¯ä»£ç 
â”‚   â”œâ”€â”€ api/                  # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth/            # è®¤è¯ç›¸å…³
â”‚   â”‚   â”‚   â”œâ”€â”€ register.post.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ login.post.ts
â”‚   â”‚   â”‚   â””â”€â”€ me.get.ts
â”‚   â”‚   â””â”€â”€ statistics/      # ç»Ÿè®¡ç›¸å…³
â”‚   â”‚       â”œâ”€â”€ pageview.post.ts
â”‚   â”‚       â””â”€â”€ click.post.ts
â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ prisma.ts
â”‚       â”œâ”€â”€ jwt.ts
â”‚       â”œâ”€â”€ password.ts
â”‚       â””â”€â”€ oss.ts
â”œâ”€â”€ pages/                    # é¡µé¢
â”‚   â”œâ”€â”€ login.vue
â”‚   â”œâ”€â”€ register.vue
â”‚   â””â”€â”€ index.vue
â”œâ”€â”€ composables/             # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ useApi.ts
â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â””â”€â”€ useStatistics.ts
â”œâ”€â”€ stores/                  # PiniaçŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ auth.ts
â”œâ”€â”€ assets/                  # é™æ€èµ„æº
â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ main.css
â”œâ”€â”€ layouts/                 # å¸ƒå±€
â”‚   â””â”€â”€ default.vue
â”œâ”€â”€ prisma/                  # Prismaé…ç½®
â”‚   â””â”€â”€ schema.prisma
â””â”€â”€ nuxt.config.ts          # Nuxté…ç½®
```

## ğŸ”§ é‡è¦è¯´æ˜

1. **æ•°æ®åº“å­—æ®µæ˜ å°„**ï¼š
   - æ•°æ®åº“ä½¿ç”¨ `BigInt` ç±»å‹çš„ID
   - APIè¿”å›æ—¶è‡ªåŠ¨è½¬æ¢ä¸º `Number` ç±»å‹
   - ç”¨æˆ·å¯†ç å­—æ®µä¸º `password_hash`ï¼ˆä¸æ˜¯ `password`ï¼‰
   - ç”¨æˆ·çŠ¶æ€ä½¿ç”¨æšä¸¾ç±»å‹ï¼ˆ`active`, `banned`, `deleted`ï¼‰

2. **JWT Token**ï¼š
   - Tokenå­˜å‚¨åœ¨ `localStorage` ä¸­
   - é»˜è®¤è¿‡æœŸæ—¶é—´ä¸º 7 å¤©
   - è¯·æ±‚æ—¶é€šè¿‡ `Authorization: Bearer <token>` å¤´éƒ¨ä¼ é€’

3. **ç»Ÿè®¡åŠŸèƒ½**ï¼š
   - é¡µé¢è®¿é—®ç»Ÿè®¡ï¼šè®°å½•é¡µé¢è·¯å¾„ã€ç”¨æˆ·ä¿¡æ¯ã€è®¾å¤‡ä¿¡æ¯ç­‰
   - ç‚¹å‡»äº‹ä»¶ç»Ÿè®¡ï¼šè®°å½•å…ƒç´ IDã€å…ƒç´ ç±»å‹ã€é¡µé¢è·¯å¾„ç­‰
   - ç»Ÿè®¡æ•°æ®å¼‚æ­¥ä¸ŠæŠ¥ï¼Œå¤±è´¥ä¸å½±å“ä¸»æµç¨‹

## ğŸ¯ ä¸‹ä¸€æ­¥å¼€å‘å»ºè®®

1. æ·»åŠ è·¯ç”±å®ˆå«ï¼Œä¿æŠ¤éœ€è¦è®¤è¯çš„é¡µé¢
2. å®Œå–„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º
3. æ·»åŠ è¡¨å•éªŒè¯å’Œè¾“å…¥æ ¡éªŒ
4. å®ç°Tokenåˆ·æ–°æœºåˆ¶
5. æ·»åŠ æ›´å¤šé¡µé¢ï¼ˆå¦‚ç”¨æˆ·ä¸­å¿ƒã€è®¾ç½®ç­‰ï¼‰
6. å®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼ˆä½¿ç”¨é˜¿é‡Œäº‘OSSï¼‰

