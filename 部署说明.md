# 免费公网部署方案

## 方案 1: Vercel 部署（推荐 ⭐⭐⭐⭐⭐）

### 优点
- ✅ 完全免费
- ✅ 专为 Nuxt.js 优化
- ✅ 自动 HTTPS
- ✅ 全球 CDN 加速
- ✅ 自动部署（连接 GitHub）
- ✅ 速度快

### 部署步骤

#### 方法 A: 通过 Vercel CLI（推荐）

1. **安装 Vercel CLI**
   ```bash
   npm install -g vercel
   ```

2. **登录 Vercel**
   ```bash
   vercel login
   ```

3. **进入项目目录并部署**
   ```bash
   cd nuxtjs
   vercel
   ```

4. **配置环境变量**
   ```bash
   vercel env add DB_HOST
   vercel env add DB_PORT
   vercel env add DB_USER
   vercel env add DB_PASSWORD
   vercel env add DATABASE_URL
   vercel env add OSS_BUCKET
   vercel env add OSS_ENDPOINT
   vercel env add OSS_REGION
   vercel env add OSS_ACCESS_KEY
   vercel env add OSS_ACCESS_SECRET
   vercel env add JWT_SECRET
   ```

5. **生产环境部署**
   ```bash
   vercel --prod
   ```

#### 方法 B: 通过 GitHub + Vercel 网站

1. **将代码推送到 GitHub**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin YOUR_GITHUB_REPO_URL
   git push -u origin main
   ```

2. **在 Vercel 网站部署**
   - 访问 https://vercel.com
   - 使用 GitHub 账号登录
   - 点击 "New Project"
   - 导入你的 GitHub 仓库
   - 选择 `nuxtjs` 目录作为项目根目录
   - 添加环境变量
   - 点击 "Deploy"

### 注意事项
- Vercel 免费版有使用限制，但对于个人项目足够
- 数据库需要可以从公网访问（你的数据库已经通过 ngrok 暴露）
- 建议使用 Vercel 的数据库服务或配置数据库白名单

---

## 方案 2: Cloudflare Tunnel（本地开发 ⭐⭐⭐⭐）

### 优点
- ✅ 完全免费
- ✅ 速度快（Cloudflare 网络）
- ✅ 不需要公网 IP
- ✅ 自动 HTTPS

### 安装和配置

1. **安装 cloudflared**
   ```bash
   # 使用 Chocolatey
   choco install cloudflared
   
   # 或使用 Scoop
   scoop install cloudflared
   
   # 或手动下载
   # https://github.com/cloudflare/cloudflared/releases
   ```

2. **启动隧道**
   ```bash
   # 运行脚本
   .\start-cloudflare-tunnel.ps1
   
   # 或直接运行
   cloudflared tunnel --url http://localhost:3000
   ```

3. **首次使用需要登录**
   - 会自动打开浏览器
   - 使用 Cloudflare 账号登录（免费注册）

---

## 方案 3: localtunnel（简单快速 ⭐⭐⭐）

### 优点
- ✅ 完全免费
- ✅ 安装简单
- ✅ 无需注册
- ✅ 可以指定子域名

### 安装和配置

1. **安装 localtunnel**
   ```bash
   npm install -g localtunnel
   ```

2. **启动隧道**
   ```bash
   # 运行脚本
   .\start-localtunnel.ps1
   
   # 或直接运行
   lt --port 3000
   
   # 指定子域名（如果可用）
   lt --port 3000 --subdomain myapp
   ```

3. **访问**
   - 会显示一个类似 `https://xxx.loca.lt` 的地址
   - 直接访问即可

---

## 方案 4: Railway（全栈部署 ⭐⭐⭐⭐）

### 优点
- ✅ 免费额度充足
- ✅ 支持数据库
- ✅ 自动部署
- ✅ 简单易用

### 部署步骤

1. **访问 Railway**
   - https://railway.app
   - 使用 GitHub 登录

2. **创建新项目**
   - 选择 "New Project"
   - 选择 "Deploy from GitHub repo"
   - 选择你的仓库

3. **配置环境变量**
   - 在项目设置中添加所有环境变量

4. **部署**
   - Railway 会自动检测 Nuxt.js 并部署

---

## 方案 5: Render（简单部署 ⭐⭐⭐⭐）

### 优点
- ✅ 免费套餐
- ✅ 自动 HTTPS
- ✅ 自动部署
- ✅ 支持数据库

### 部署步骤

1. **访问 Render**
   - https://render.com
   - 使用 GitHub 登录

2. **创建 Web Service**
   - 选择 "New Web Service"
   - 连接 GitHub 仓库
   - 选择 `nuxtjs` 目录
   - 构建命令: `npm install && npm run build`
   - 启动命令: `npm run preview`

3. **配置环境变量**
   - 在 Environment 标签页添加所有变量

---

## 推荐方案对比

| 方案 | 速度 | 易用性 | 免费额度 | 推荐场景 |
|------|------|--------|----------|----------|
| Vercel | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 充足 | 生产环境部署 |
| Cloudflare Tunnel | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | 无限制 | 本地开发测试 |
| localtunnel | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 无限制 | 快速测试 |
| Railway | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | 充足 | 全栈应用 |
| Render | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | 充足 | 简单部署 |

---

## 快速开始

### 本地开发（推荐 Cloudflare Tunnel）
```bash
.\start-cloudflare-tunnel.ps1
```

### 生产部署（推荐 Vercel）
```bash
cd nuxtjs
npm install -g vercel
vercel login
vercel
```

---

## 注意事项

1. **数据库连接**
   - 确保数据库可以从公网访问
   - 配置数据库白名单（允许 Vercel/Railway 的 IP）

2. **环境变量**
   - 不要在代码中硬编码敏感信息
   - 使用平台的环境变量配置

3. **CORS 配置**
   - 如果前端和后端分离部署，需要配置 CORS

4. **文件上传**
   - OSS 配置需要正确
   - 确保 OSS 可以从公网访问

