# 岛屿社交平台产品构想和规划书


## 二、App 总体架构

| 一级导航                   | 功能定位                       |
| -------------------------- | ------------------------------ |
| 首页（发现/关注/热门岛屿） | 内容浏览、关注动态、岛屿发现   |
| 岛屿                       | 加入的岛屿、岛屿详情、内容浏览 |
| 通知                       | 系统通知、互动通知、付费通知   |
| 我的                       | 个人中心、金币系统、创作管理   |
| 发布                       | 发布个人动态、发布岛屿帖子     |

### 7. 数据统计系统

- **页面访问统计**

  - 页面访问记录（页面路径、访问时间、用户 ID、设备信息）
  - 页面停留时长统计
  - 页面访问来源统计
  - 页面访问设备统计（APP/Web）

- **点击事件统计**

  - 按钮点击记录（按钮 ID、点击位置、点击时间、用户 ID）
  - 卡片点击记录（卡片类型、内容 ID、点击时间）
  - 链接点击记录（链接地址、点击时间、来源页面）
  - 交互行为统计（点赞、评论、分享等）

- **数据上报机制**

  - 实时上报：关键操作立即上报
  - 批量上报：非关键操作批量上报（减少请求频率）
  - 本地缓存：网络异常时本地缓存，恢复后上报
  - 数据去重：防止重复上报

- **统计分析**
  - 页面访问热力图
  - 用户行为路径分析
  - 功能使用率统计
  - 转化率分析

## 五、技术架构

### 前端技术栈

#### APP 端（UniApp）

- **框架：** UniApp
- **UI 组件库：** uView UI / ColorUI
- **状态管理：** Vuex / Pinia
- **网络请求：** axios
- **图片处理：** 图片压缩、裁剪
- **视频处理：** 视频压缩、预览
- **统计埋点：** 页面访问统计、点击事件统计

#### Web 端（Nuxt.js）

- **框架：** Nuxt.js 3
- **UI 组件库：** Element Plus / Ant Design Vue
- **状态管理：** Pinia
- **网络请求：** axios / $fetch
- **服务端渲染：** SSR / SSG
- **SEO 优化：** 服务端渲染支持
- **统计埋点：** 页面访问统计、点击事件统计

### 后端技术栈

- **框架：** NestJS
- **ORM：** Prisma
- **数据库：** MySQL
- **文件存储：** 阿里云 OSS
- **图片处理：** Sharp
- **认证：** JWT
- **缓存：** Redis（可选）

### 数据库设计

#### 核心数据表

1. **用户表（User）**

   - id, username, nickname, avatar, phone, email
   - password_hash, status, role, created_at, updated_at

2. **岛屿表（Island）**

   - id, name, description, cover, avatar, category
   - owner_id, price, member_count, post_count
   - status, created_at, updated_at

3. **帖子表（Post）**

   - id, user_id, island_id, title, content
   - media_type, media_urls, like_count, comment_count
   - status, created_at, updated_at

4. **评论表（Comment）**

   - id, post_id, user_id, content, parent_id
   - like_count, created_at, updated_at

5. **关注表（Follow）**

   - id, follower_id, following_id, created_at

6. **加入岛屿表（IslandMember）**

   - id, user_id, island_id, join_type, paid_amount
   - created_at, updated_at

7. **通知表（Notification）**

   - id, user_id, type, title, content, related_id
   - is_read, created_at

8. **金币交易表（CoinTransaction）**

   - id, user_id, type, amount, balance, description
   - created_at

9. **页面访问统计表（PageView）**

   - id, user_id, page_path, page_title, device_type, platform
   - referrer, stay_duration, created_at

10. **点击事件统计表（ClickEvent）**

    - id, user_id, event_type, element_id, element_type, page_path
    - click_position_x, click_position_y, related_id, created_at

11. **用户行为统计表（UserBehavior）**
    - id, user_id, behavior_type, target_type, target_id, page_path
    - device_info, ip_address, created_at



## 十、测试数据准备

### 用户数据

- 普通用户（10 个）
- 创作者用户（5 个）
- 岛屿创建者（3 个）

### 内容数据

- 各类帖子（10 条）
- 评论数据（ 10 条）
- 点赞数据（ 10 条）

### 岛屿数据

- 不同分类的岛屿（ 5 个）
- 岛屿帖子（9 条）

### 关注关系

- 关注关系（11 条）


## 十三、后续规划

### 功能扩展

- 私信功能
- 直播功能
- 短视频功能
- 电商功能

### 技术优化

- 推荐算法
- 大数据分析
- AI 内容审核
- 性能优化
- 数据统计系统优化（实时分析、数据挖掘）
- Web 端性能优化（首屏加载、SEO 优化）

